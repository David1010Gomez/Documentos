<!DOCTYPE html>
<html>
<head>
    	<meta charset="utf-8">
	<script type = "text/javascript" src="https://code.jquery.com/jquery-1.10.2.js"></script>
    	<title>Mapa</title>

	

</head>
<body >
	<div> 
		<h1>Gráfica Rango de edades en Colombia</h1>
		<br/>
		<div style="float: right; margin-right:10%; border: 1px solid #eee; 
		padding: 10px; width: 30%; position: absolute; background-color: #eee;">
			<a onclick="Recarga();" style="float: right; text-decoration: underline; 
			cursor: pointer;">Nueva Grafica</a>
			<h2>Ingreso de Datos (en miles)</h2>
			<p >0 - 12 Años:</p>
			<input type="text" id="d1" />
			<p >13 - 25 Años:</p>
			<input type="text" id="d2"/>
			<p >26 - 37 Años:</p>
			<input type="text" id="d3"/>
			<p >38 - 50 Años:</p>
			<input type="text" id="d4"/>
			<p >51 - 100 Años:</p>
			<input type="text" id="d5"/>
			<br/>
			<br/>
			<br/>
			<input type="button" id="Envia_Datos" value="Crear Grafico"/>
		</div>
		<p id="demo"></p>
		<canvas id="canvas" style ="width:400px; height: 200px; margin-left: 40%;"></canvas>
	</div>
	<script>
		function Recarga()
		{
			window.location.href = "Index.html";
		}
		var c, canvas;
		canvas = document.getElementById("canvas");
		c = canvas.getContext("2d");
		canvas.addEventListener("mousedown", getPosition, false);
		
		c.clearRect(0,0,1000,500);
		c.beginPath();
		
		c.font="0.5em Arial";
		c.fillText("51-100",1,27);
		c.fillText("38-50",1,52);
		c.fillText("26-37",1,77);
		c.fillText("13-25",1,102);
		c.fillText("0-12",1,127);
		c.fillText("Años",8,8);

		c.fillText("2mil",40,150);
		c.fillText("4mil",60,150);
		c.fillText("6mil",80,150);
		c.fillText("8mil",100,150);
		c.fillText("10Mil",120,150);
		c.fillText("12Mil",140,150);
		c.fillText("14Mil",160,150);
		c.fillText("16Mil",180,150);
		c.fillText("18Mil",200,150);			
		c.fillText("20Mil",220,150);
		c.fillText("22Mil",240,150);
		c.fillText("24Mil",260,150);
		
		
		//Eje X
      		c.moveTo(30, 140);
      		c.lineTo(290, 140);
      		c.lineWidth = 2;

		//Eje Y
		c.moveTo(30, 5);
      		c.lineTo(30, 140);
		
		c.moveTo(50, 135);
      		c.lineTo(50, 145);

		c.moveTo(70, 135);
      		c.lineTo(70, 145);

		c.moveTo(90, 135);
      		c.lineTo(90, 145);

		c.moveTo(110, 135);
      		c.lineTo(110, 145);

		c.moveTo(130, 135);
      		c.lineTo(130, 145);

		c.moveTo(150, 135);
      		c.lineTo(150, 145);

		c.moveTo(170, 135);
      		c.lineTo(170, 145);

		c.moveTo(190, 135);
      		c.lineTo(190, 145);

		c.moveTo(210, 135);
      		c.lineTo(210, 145);

		c.moveTo(230, 135);
      		c.lineTo(230, 145);

		c.moveTo(250, 135);
      		c.lineTo(250, 145);

		c.moveTo(270, 135);
      		c.lineTo(270, 145);
		
      		c.lineWidth = 1.5;

      		c.stroke();
		
		$('#Envia_Datos').click(function(){

			var d1 = $('#d1').val();
			var d2 = $('#d2').val();
			var d3 = $('#d3').val();
			var d4 = $('#d4').val();
			var d5 = $('#d5').val();			

			c.fillRect(30, 20, d5/100, 10);
		
		
			c.fillRect(30, 45, d4/100, 10);
		

			c.fillRect(30, 70, d3/100, 10);
		
			
			c.fillRect(30, 95, d2/100, 10);


			c.fillRect(30, 120, d1/100, 10);
			
			
			$('#d1').attr("disabled","true");
			$('#d2').attr("disabled","true");
			$('#d3').attr("disabled","true");
			$('#d4').attr("disabled","true");
			$('#d5').attr("disabled","true");
						
      
		});
		
		function getPosition(event)
      		{
			var dd1 = $('#d1').val();
			var dd2 = $('#d2').val();
			var dd3 = $('#d3').val();
			var dd4 = $('#d4').val();
			var dd5 = $('#d5').val();

			var Array = [dd1, dd2, dd3, dd4, dd5];

        		var x = new Number();
        		var y = new Number();
        		var canvas = document.getElementById("canvas");

        		if (event.x != undefined && event.y != undefined)
        		{
          		x = event.x;
          		y = event.y;
        		}
        		else // Firefox method to get the position
        		{
          			x = event.clientX + document.body.scrollLeft +
              			document.documentElement.scrollLeft;
          			y = event.clientY + document.body.scrollTop +
              			document.documentElement.scrollTop;
        		}

        		x -= canvas.offsetLeft;
        		y -= canvas.offsetTop;

			var xx = "";
			
			var Posiciones=[];

			for (i = 0; i<Array.length; i++)
			{
					
				var T= Array[i];
				
				if( T>0 && T<=2500)
				{					
					xx = ((T)/100)+42;
					
					
				} else {
					if(T>=2500 && T<6000)
					{
						xx = ((T)/100)+57;
						
					} else {
						if(T>=6000 && T<10000)
						{
							xx = ((T)/100)+69;
							
						} else {
							if(T>=10000 && T<14000)
							{
								xx = ((T)/100)+79;
								
							} else {
								if(T>=14000 && T<18000)
								{
									xx = ((T)/100)+91;
									
								} else {
									if(T>=18000 && T<22000)
									{
										xx = ((T)/100)+104;
										Posiciones[i]=xx;
									} else {
										if(T>22000)
										{
											xx = ((T)/100)+115;
											
										}
									}
								}
							}
						}
					}
				}
				Posiciones[i]=""+xx; alert(xx);
				xx="";
				T = "";	
			}
			document.getElementById("demo").innerHTML = Posiciones[0];
		//	alert('2'+ Posiciones[1]);
			
			if ((x>=40 && x<(Posiciones[0])) && (y>=160 && y<170))
			{
				alert('Exacto1');
				
				
			}
			if ((x>=40 && x<(Posiciones[1])) && (y>=125 && y<135))
			{
				alert('Exacto2');
				
				
			}
			if ((x>=40 && x<(Posiciones[2])) && (y>=92 && y<102))
			{
				alert('Exacto3');
				
			}		
			if ((x>=40 && x<(Posiciones[3])) && (y>=60 && y<70))
			{
				alert('Exacto4');
				
			}
			if ((x>=40 && x<(Posiciones[4])) && (y>=26 && y<36))
			{
				alert('Exacto5');
				
			}
        		alert("x: " + x + "  y: " + y);
      		}


	</script>
</body>
</html>